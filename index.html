<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CARLOS – COLCIAC</title>

  <style>
    :root{
      --bg-dark: #070b0c;
      --fog-1: #0b1517;
      --accent: #f2f2f2;
      --beam: #e7e2d3;
      --ui: #9aa3a7;
      --glow: rgba(231, 226, 211, .18);

      /* <<< ajuste fácil da área onde o COLCIAC quica >>> */
      --arena-width: min(90vw, 2080px);
      --arena-height: 100vh;
    }

    *{ box-sizing: border-box; }
    html, body{
      height:100%;
      margin:0;
      background:
        radial-gradient(1200px 800px at 25% 70%, #0e1618 0%, transparent 60%),
        radial-gradient(1000px 700px at 75% 20%, #0a1011 0%, transparent 55%),
        linear-gradient(#0a0f10, #050708 65%, #020304 100%);
      color: var(--accent);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      overflow:hidden;
    }

    .layer{ position: fixed; inset:0; pointer-events:none; }
    #particles{ z-index: 1; }
    #backdrop{ z-index: 2; }
    #ui{ z-index: 3; pointer-events:auto; }

    #backdrop::before{
      content:""; position:absolute; inset:0;
      background:
        radial-gradient(900px 700px at 20% 80%, rgba(255,255,255,.06), transparent 65%),
        radial-gradient(700px 600px at 80% 15%, rgba(255,255,255,.05), transparent 60%);
      mix-blend-mode: screen; opacity:.5;
    }

    #dim{ position:absolute; inset:0; background: #000; opacity:0; transition: opacity .9s ease; }
    .is-dimmed #dim{ opacity:.55; }

    .center{ position:absolute; inset:0; display:grid; place-items:center; }

    /* BOOT */
    .boot{ display:flex; flex-direction:column; gap:18px; align-items:center; }
    .boot h1{ margin:0; font-weight:600; letter-spacing:.25em; font-size: clamp(14px, 3.5vw, 18px); color: var(--ui); opacity:.9; }
    .bar{ width:min(82vw, 720px); height:14px; border:1px solid rgba(255,255,255,.25); border-radius: 999px; background: rgba(255,255,255,.06); box-shadow: inset 0 0 12px rgba(0,0,0,.65); overflow:hidden; }
    .bar .fill{ width:0%; height:100%; background: linear-gradient(90deg, rgba(231,226,211,.2), rgba(231,226,211,.7)); box-shadow: 0 0 18px 2px var(--glow); transition: width .08s linear; }
    .percent{ font-variant-numeric: tabular-nums; color: #d7dbde; text-shadow: 0 0 14px rgba(255,255,255,.08); font-size: clamp(22px, 5vw, 38px); letter-spacing:.08em; }

    /* Frases */
    .phrase{ position:absolute; inset:0; display:grid; place-items:center; opacity:0; transition:opacity 900ms ease; }
    .phrase.show{ opacity:1; }
    .phrase img{ max-width:min(68vw, 780px); height:auto; filter: drop-shadow(0 18px 45px rgba(0,0,0,.6)); }

    /* Wallpaper */
    #wallpaper{ position:absolute; inset:0; background-position:center; background-size:cover; opacity:0; transition: opacity 1200ms ease; }
    #wallpaper.show{ opacity:1; }

    /* Lanterna */
    #beam{ position:absolute; inset:0; pointer-events:none; opacity:0; transition: opacity .8s ease; }
    .beam-on{ opacity:1; }

    /* Vídeo + arena */
    .video-wrap{ position: absolute; inset:0; display:grid; place-items:center; padding: clamp(16px, 4vw, 36px); opacity:0; transition: opacity 1000ms ease; z-index:5; }
    .video-wrap.show{ opacity:1; }

    #arena{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width: var(--arena-width); height: var(--arena-height); pointer-events:none; }
    .frame{
      position: absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      width: min(100%, 1100px);
      aspect-ratio: 16/9;
      background:
        radial-gradient(120% 140% at 50% -15%, rgba(255,255,255,.07), rgba(255,255,255,.02) 45%, transparent),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 18px;
      box-shadow:
        0 20px 60px rgba(0,0,0,.55),
        inset 0 0 0 1px rgba(255,255,255,.08),
        inset 0 0 60px rgba(255,255,255,.04);
      overflow:hidden; z-index:2; pointer-events:auto;
    }
    .frame::before{ content:""; position:absolute; inset:0; pointer-events:none; background: linear-gradient(110deg, transparent 0 35%, rgba(255,255,255,.08) 50%, transparent 65%); mix-blend-mode: screen; opacity:.35; }
    .frame .bezel{ position:absolute; inset:10px; border-radius:12px; border:1px solid rgba(255,255,255,.08); box-shadow: inset 0 0 25px rgba(0,0,0,.6); }
    video{ position:absolute; inset:18px; width: calc(100% - 36px); height: calc(100% - 36px); object-fit:cover; border-radius: 10px; outline:none; }

    /* COLCIAC quicando DENTRO da arena e ATRÁS do vídeo */
    #floatingLogo{ position:absolute; left:0; top:0; width:100%; height:100%; z-index:1; pointer-events:none; }
    #floatingLogo img{ position:absolute; left:0; top:0; width:200px; height:auto; filter: drop-shadow(0 10px 30px rgba(0,0,0,.65)); }

    .credit{ position: fixed; bottom:10px; right:14px; font-size: 12px; color:#9aa3a7; opacity:.6; z-index:7; }

    canvas{ display:block; width:100%; height:100%; }

    @media (max-width: 480px){
      .bar{ height:12px; }
      .frame{ border-radius: 14px; }
      video{ inset:12px; border-radius:8px; }
      #floatingLogo img{ width:160px; }
    }
  </style>
</head>
<body>
  <!-- Partículas -->
  <div id="particles" class="layer"><canvas id="fx"></canvas></div>

  <!-- Backdrop -->
  <div id="backdrop" class="layer">
    <div id="wallpaper"></div>
    <div id="beam"></div>
    <div id="dim"></div>
  </div>

  <!-- UI -->
  <div id="ui" class="layer center">
    <div id="boot" class="boot">
      <h1>INICIALIZANDO SEQUÊNCIA</h1>
      <div class="bar"><div class="fill" id="fill"></div></div>
      <div class="percent" id="percent">0%</div>
    </div>

    <div id="phrases"></div>

    <div class="video-wrap" id="videoWrap" hidden>
      <div id="arena">
        <div class="frame">
          <div class="bezel"></div>
          <video id="video" controls preload="metadata"></video>
        </div>
        <!-- COLCIAC por trás do vídeo -->
        <div id="floatingLogo"><img id="floatingLogoImg" src="" alt="COLCIAC"></div>
      </div>
    </div>
  </div>

  <div class="credit">COLCIAC • experiência interativa</div>

  <script>
    // ====== CONFIG DE ARQUIVOS ======
    const LOGO_SRC = 'colciac.png';
    const WALLPAPER_SRC = 'wallpaper.png';
    const VIDEO_SRC = 'video3.mp4';

    const PHRASES = [
      'escrita1.png',
      'escrita2.png',
      'escrita3.png',
      'escrita4.png',
      'escrita5.png',
      'escrita6.png'
    ];

    // ====== UTIL ======
    const sleep = (ms)=>new Promise(r=>setTimeout(r,ms));
    const preloadImage = (src)=>new Promise((res,rej)=>{ const i=new Image(); i.onload=()=>res(i); i.onerror=rej; i.src=src; });

    // ====== BOOT ======
    async function runBootSequence(){
      const fill = document.getElementById('fill');
      const percent = document.getElementById('percent');
      const boot = document.getElementById('boot');

      let p = 0;
      while(p < 100){
        const step = Math.min(100 - p, Math.random()*4 + 1.2);
        p = Math.min(100, p + step);
        fill.style.width = p.toFixed(1) + '%';
        percent.textContent = Math.floor(p) + '%';
        await sleep(70 + Math.random()*90);
      }
      await sleep(220);
      boot.classList.add('fade-out');
      await sleep(900);
      boot.remove();
    }

    // ====== WALLPAPER ======
    async function showWallpaper(){
      const wp = document.getElementById('wallpaper');
      wp.style.backgroundImage = `url('${WALLPAPER_SRC}')`;
      await sleep(40);
      wp.classList.add('show');
      await sleep(5000); // mantém 5s antes do vídeo
    }

    // ====== LANTERNA ======
    function drawBeam(x=50, y=60){
      const beam = document.getElementById('beam');
      beam.style.background = `radial-gradient(500px 400px at ${x}% ${y}%, rgba(231,226,211,.35), rgba(231,226,211,.08) 45%, transparent 70%)`;
    }
    async function beamOn(){ const b=document.getElementById('beam'); drawBeam(50,60); b.classList.add('beam-on'); await sleep(650); }
    async function beamOff(){ const b=document.getElementById('beam'); b.classList.remove('beam-on'); await sleep(650); }

    // ====== FRASES ======
    async function playPhrases(){
      const container = document.getElementById('phrases');
      for(const src of PHRASES){
        const wrap = document.createElement('div');
        wrap.className = 'phrase';
        const img = document.createElement('img');
        img.src = src;
        wrap.appendChild(img);
        container.appendChild(wrap);

        drawBeam(35 + Math.random()*30, 45 + Math.random()*20);
        await beamOn();
        wrap.classList.add('show');
        await sleep(1800);

        await beamOff();
        wrap.classList.remove('show');
        await sleep(700);
        wrap.remove();
      }
    }

    // ====== VÍDEO ======
    async function showVideo(){
      const wrap = document.getElementById('videoWrap');
      const video = document.getElementById('video');
      video.src = VIDEO_SRC;
      wrap.hidden = false;
      await sleep(40);
      document.body.classList.add('is-dimmed');
      wrap.classList.add('show');
    }

    // ====== COLCIAC (quica na ARENA por trás do vídeo) ======
    function startFloatingLogo(){
      const arena = document.getElementById('arena');
      const el = document.getElementById('floatingLogo');
      const img = document.getElementById('floatingLogoImg');
      if(!arena){ console.warn('Arena não encontrada'); return; }

      function loaded(){
        return new Promise((res,rej)=>{
          if(img.complete && img.naturalWidth>0) return res();
          img.onload=()=>res(); img.onerror=rej;
        });
      }
      img.src = LOGO_SRC;

      loaded().then(()=>{
        el.style.opacity = '1'; // garante visível

        const scaleToArena = ()=>{
          const a = arena.getBoundingClientRect();
          const w = Math.max(110, Math.min(280, a.width * 0.18));
          img.style.width = w + 'px';
        };
        scaleToArena();

        let x = 20, y = 20;
        let vx = (Math.random()>.5?1:-1) * (1.6 + Math.random()*0.8);
        let vy = (Math.random()>.5?1:-1) * (1.4 + Math.random()*0.8);
        const PAD = 12;

        function step(){
          const a = arena.getBoundingClientRect();
          const r = img.getBoundingClientRect();
          const maxX = a.width  - r.width  - PAD;
          const maxY = a.height - r.height - PAD;

          x += vx; y += vy;
          if(x <= PAD){ x = PAD; vx *= -1; }
          if(x >= maxX){ x = maxX; vx *= -1; }
          if(y <= PAD){ y = PAD; vy *= -1; }
          if(y >= maxY){ y = maxY; vy *= -1; }

          vx += (Math.random()-0.5)*0.04;
          vy += (Math.random()-0.5)*0.04;
          vx = Math.max(-2.4, Math.min(2.4, vx));
          vy = Math.max(-2.2, Math.min(2.2, vy));

          img.style.left = x + 'px';
          img.style.top  = y + 'px';

          requestAnimationFrame(step);
        }
        requestAnimationFrame(step);

        addEventListener('resize', scaleToArena);
      }).catch(()=>console.warn('Logo COLCIAC não carregou — verifique LOGO_SRC.'));
    }

    // ====== PARTÍCULAS ======
    (function particles(){
      const canvas = document.getElementById('fx');
      const ctx = canvas.getContext('2d');
      let w, h, dpr;
      const MAX = 120;
      const P = [];

      function resize(){
        dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        w = canvas.width = Math.floor(innerWidth * dpr);
        h = canvas.height = Math.floor(innerHeight * dpr);
        canvas.style.width = innerWidth + 'px';
        canvas.style.height = innerHeight + 'px';
      }
      window.addEventListener('resize', resize);
      resize();

      function spawn(){
        return {
          x: Math.random()*w, y: Math.random()*h,
          r: Math.random()*1.6 + .6,
          vx: (Math.random()-.5)*.12, vy: (Math.random()-.2)*.18 - .02,
          a: Math.random()*Math.PI*2,
          life: Math.random()*7000 + 7000
        };
      }

      for(let i=0;i<MAX;i++) P.push(spawn());

      let last = performance.now();
      function tick(t){
        const dt = t - last; last = t;
        ctx.clearRect(0,0,w,h);

        const g = ctx.createRadialGradient(w*0.2,h*0.8, 0, w*0.2,h*0.8, Math.max(w,h)*.9);
        g.addColorStop(0, 'rgba(231,226,211,0.02)');
        g.addColorStop(1, 'rgba(231,226,211,0)');
        ctx.fillStyle = g; ctx.fillRect(0,0,w,h);

        for(let i=0;i<MAX;i++){
          const p = P[i];
          p.x += (p.vx + Math.cos(p.a)*.04) * dpr;
          p.y += (p.vy + Math.sin(p.a)*.02) * dpr;
          p.a += 0.003 + Math.random()*0.002;
          p.life -= dt;

          if(p.x < -20) p.x = w+20; if(p.x > w+20) p.x = -20;
          if(p.y < -20) p.y = h+20; if(p.y > h+20) p.y = -20;
          if(p.life < 0){ P[i] = spawn(); continue; }

          const alpha = 0.05 + (Math.sin(t*0.001 + i)*0.03 + 0.03);
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r * dpr, 0, Math.PI*2);
          ctx.fillStyle = `rgba(231,226,211,${alpha})`;
          ctx.shadowColor = 'rgba(231,226,211,.25)';
          ctx.shadowBlur = 18;
          ctx.fill();
        }
        requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);
    })();

    // ====== ORQUESTRAÇÃO ======
    (async function main(){
      try{
        await Promise.all([
          preloadImage(LOGO_SRC),
          preloadImage(WALLPAPER_SRC),
          ...PHRASES.map(preloadImage)
        ]);

        await runBootSequence();   // 1
        await playPhrases();       // 2
        await showWallpaper();     // 3
        await showVideo();         // 4
        startFloatingLogo();       // 5
      }catch(err){
        console.error('Erro na sequência:', err);
      }
    })();
  </script>
</body>
</html>



